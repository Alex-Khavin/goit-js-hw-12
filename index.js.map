{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport async function fetchData(options) {\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?`, options);\n        if (!response.data?.hits?.length) {\n            throw new Error(\"Sorry, there are no images matching your search query. Please try again!\");\n           }\n           return response.data.hits;\n    } catch (error) {\n        iziToast.error({\n            message: `${error.message}`,\n            messageColor: 'white',\n            // iconUrl: '/blocked.svg',\n            position: 'topRight',\n            color: '#ef4040',\n        });\n           return [];\n    }\n};\n     \n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function markupImg(cards) {\n  return cards\n  .map(card => {\n    return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${card.largeImageURL}\">\n    <img\n    class=\"gallery-image\"\n    src=\"${card.webformatURL}\"\n    alt=\"${card.tags.slice(0, 120)}\"\n    />\n    </a>\n    <div class=\"item-subtitle\">\n    <p class=\"item-text\"><b>Likes</b> ${card.likes}</p>\n    <p class=\"item-text\"><b>Views</b> ${card.views}</p>\n    <p class=\"item-text\"><b>Comments</b> ${card.comments}</p>\n    <p class=\"item-text\"><b>Downloads</b> ${card.downloads}</p>\n    </div>\n    </li>`;\n  })\n  .join(\"\");\n}\n\nexport let gallery = new SimpleLightbox('.gallery a', { captionsData: \"alt\", captionDelay: 250 });","import { fetchData } from \"./js/pixabay-api\";\nimport { markupImg } from \"./js/render-functions\"\nimport { gallery } from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet inputData = \"\";\nlet page = 1;\nlet totalPages = 1;\n\nconst options = {\n    params: {\n        key: \"49358798-a0fde913d86352b572e9384bf\",\n        q: \"\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page,\n        }\n};\n\nconst formData = document.querySelector(\".form\");\nconst formInput = document.querySelector(\"input\");\nconst galleryList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".btn\");\n\n\nformData.addEventListener(\"submit\", formSubmit);\nformInput.addEventListener(\"input\", onInput);\nbtnLoadMore.addEventListener(\"click\", loadMore);\n\nfunction onInput(event) {\n    inputData = event.target.value.trim();\n};\n\nasync function formSubmit(event) {\n    event.preventDefault();\n    const form = event.currentTarget;\n    btnLoadMore.classList.add(\"hidden\");\n    page = 1;\n    options.params.page = page;\n\n    if (inputData === \"\") {\n         iziToast.error({\n                message: 'Fill in the search field!',\n                messageColor: 'white',\n                // iconUrl: '/blocked.svg',\n                position: 'topRight',\n                color: '#ef4040',\n         });\n        form.reset();\n        return;\n    }\n\n    options.params.q = inputData;\n\n    galleryList.innerHTML = \"\";\n    loader.classList.remove(\"hidden\");\n\n    try {\n        const images = await fetchData(options);\n           if (images.length === 0) {\n            btnLoadMore.classList.add(\"hidden\");\n            return;\n           }\n        \n        totalPages = Math.ceil(500 / options.params.per_page);\n\n        galleryList.insertAdjacentHTML(\"beforeend\", markupImg(images));\n        btnLoadMore.classList.remove(\"hidden\");\n        gallery.refresh();\n\n        if (page < totalPages) {\n            btnLoadMore.classList.remove(\"hidden\");\n        }\n    } finally {\n        loader.classList.add(\"hidden\");\n    }\n\n    form.reset();\n    inputData = \"\";\n};\n\nasync function loadMore() {\n    page += 1;\n    options.params.page = page;\n    loader.classList.remove(\"hidden\");\n\n    if (page > totalPages) {\n        iziToast.error({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n            messageColor: 'white',\n            color: '#ef4040',\n        });\n        loader.classList.add(\"hidden\");\n        btnLoadMore.classList.add(\"hidden\");\n        return;\n    }\n\n  try {\n      const newImg = await fetchData(options);\n      galleryList.insertAdjacentHTML(\"beforeend\", markupImg(newImg));\n      gallery.refresh();\n\n      const itemHeight = document.querySelector(\".gallery-item\");\n        if (itemHeight) {\n            const cardHeight = itemHeight.getBoundingClientRect().height;\n            window.scrollBy({ top: cardHeight * 2, behavior: \"smooth\" });\n        }\n\n  } catch (error) {\n    console.log(error);\n  } finally {\n        loader.classList.add(\"hidden\");\n    }\n};\n\n\n\n\n\n\n"],"names":["fetchData","options","response","axios","_b","_a","error","iziToast","markupImg","cards","card","gallery","SimpleLightbox","inputData","page","totalPages","formData","formInput","galleryList","loader","btnLoadMore","formSubmit","onInput","loadMore","event","form","images","newImg","itemHeight","cardHeight"],"mappings":"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"}